import{p as e,a as t,r as a,o as s,c as r,b as o,w as n,d,t as c,e as i,F as l,f as u,g as h,h as p,v as m,i as v,K as _,X as g}from"./vendor.6ba19610.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(a){const s=new URL(e,location),r=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((a,o)=>{const n=new URL(e,s);if(self[t].moduleMap[n])return a(self[t].moduleMap[n]);const d=new Blob([`import * as m from '${n}';`,`${t}.moduleMap['${n}']=m;`],{type:"text/javascript"}),c=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(d),onerror(){o(new Error(`Failed to import: ${e}`)),r(c)},onload(){a(self[t].moduleMap[n]),r(c)}});document.head.appendChild(c)})),self[t].moduleMap={}}}("/lego-set-checker/assets/");var S={name:"Header",props:{contentSelector:String},data:()=>({searchedSet:"",sets:[]}),methods:{async onSearch(e){const t=await this.$http.get("https://rebrickable.com/api/v3/lego/sets",{params:{search:e},headers:{Authorization:"key 2d917e228bae2a71075a8de5361b4f49"}});this.sets=t.data.results.map((e=>({label:`${e.set_num} | ${e.name}`,key:e.set_num})))},onSelect(e){this.searchedSet=e.label,this.$emit("setSelected",e.key)}},emits:["setSelected"]};const f=n("data-v-f988328e");e("data-v-f988328e");const b={class:"searchbar__icon"},P=d("search");t();const y=f(((e,t,n,d,c,i)=>{const l=a("ui-icon"),u=a("ui-autocomplete"),h=a("ui-top-app-bar");return s(),r(h,{"content-selector":n.contentSelector,"nav-icon":"",title:"Lego Set Checker"},{toolbar:f((()=>[o(u,{"model-value":c.searchedSet,source:c.sets,class:"autocomplete",delay:"500",placeholder:"Search set by ID",remote:"",onSearch:i.onSearch,onSelected:i.onSelect},{after:f((()=>[o("div",b,[o(l,{dark:"",outlined:""},{default:f((()=>[P])),_:1})])])),_:1},8,["model-value","source","onSearch","onSelected"])])),_:1},8,["content-selector"])}));S.render=y,S.__scopeId="data-v-f988328e";var k={name:"SetCard",props:{searchedSet:Object},methods:{async fetchParts(){this.$emit("fetchParts",this.searchedSet.set_num)}},emits:["fetchParts"]};const w=n("data-v-235ce690");e("data-v-235ce690");const $={key:0,class:"set-card__container"},C={class:"set-card__info"},x={class:"set-card__info-text"},I=o("div",{class:"set-card__info-labels"},[o("div",null,"Name:"),o("div",null,"Set-Number:"),o("div",null,"Parts:")],-1),O={class:"set-card__info-values"},j=d("Get parts");t();const L=w(((e,t,n,d,l,u)=>{const h=a("ui-button");return(void 0).searchedSet?(s(),r("div",$,[o("img",{src:(void 0).searchedSet.set_img_url,alt:"",class:"set-card__image",width:"200"},null,8,["src"]),o("div",C,[o("div",x,[I,o("div",O,[o("div",null,c((void 0).searchedSet.name),1),o("div",null,c((void 0).searchedSet.set_num),1),o("div",null,c((void 0).searchedSet.num_parts),1)])]),o(h,{raised:"",onClick:u.fetchParts},{default:w((()=>[j])),_:1},8,["onClick"])])])):i("",!0)}));k.render=L,k.__scopeId="data-v-235ce690";const N=e=>{const t=localStorage.getItem(e);return t?JSON.parse(t):void 0};var U={name:"PartCard",props:{part:Object},methods:{handlePersistPart(){((e,t)=>{var a;const s=N(e);if(!s)throw new Error(`set with id ${e} was not found in local storage`);s.parts=null==(a=s.parts)?void 0:a.map((e=>e.id===t.id?t:e)),localStorage.setItem(e,JSON.stringify(s))})(this.part.set_num,this.part)}}};const E=n("data-v-5344dc4b");e("data-v-5344dc4b");const M={key:0,class:"part-card__container"},R={class:"part-card__info"},z=o("div",{class:"part-card__info-labels"},[o("div",null,"Name:"),o("div",null,"Quantity:")],-1),F={class:"part-card__info-values"},A={class:"part-card__form"},J=o("hr",null,null,-1);t();const q=E(((e,t,n,d,u,h)=>{const p=a("ui-textfield");return s(),r(l,null,[(void 0).part?(s(),r("div",M,[o("img",{src:(void 0).part.part.part_img_url,alt:"",class:"part-card__image",width:"100"},null,8,["src"]),o("div",R,[z,o("div",F,[o("div",null,c((void 0).part.part.name),1),o("div",null,c((void 0).part.quantity),1)])]),o("div",A,[o(p,{modelValue:(void 0).part.quantity_owned,"onUpdate:modelValue":t[1]||(t[1]=e=>(void 0).part.quantity_owned=e),modelModifiers:{number:!0},"input-type":"number",placeholder:"Quantity owned",onChange:h.handlePersistPart},null,8,["modelValue","onChange"])])])):i("",!0),J],64)}));U.render=q,U.__scopeId="data-v-5344dc4b";const H=(e,t)=>{const a=N(e);if(!a)throw new Error(`set with id ${e} was not found in local storage`);t.forEach((e=>{var t,s,r;a.parts||(a.parts=[]),(null==(s=null==(t=a.parts)?void 0:t.map((e=>e.id)))?void 0:s.includes(e.id))||null==(r=a.parts)||r.push(e)})),localStorage.setItem(e,JSON.stringify(a))},V={last_modified_dt:"2021-02-14T20:05:56.824055Z",name:"Backhoe Loader",num_parts:609,set_img_url:"https://cdn.rebrickable.com/media/sets/8069-1/49749.jpg",set_num:"8069-1",set_url:"https://rebrickable.com/sets/8069-1/backhoe-loader/",theme_id:7,year:2011};var B={name:"app",components:{PartCard:U,SetCard:k,Header:S},data:()=>({searchedSet:V,parts:[],nextPage:"",prevPage:""}),methods:{async onSelect(e){const t=N();if(t)this.searchedSet=t;else{const t=await this.$http.get(`https://rebrickable.com/api/v3/lego/sets/${e}`,{headers:{Authorization:"key 2d917e228bae2a71075a8de5361b4f49"}});this.searchedSet=t.data,localStorage.getItem(this.searchedSet.set_num)||localStorage.setItem(this.searchedSet.set_num,JSON.stringify(this.searchedSet))}},async getParts(){const e=await this.$http.get(`https://rebrickable.com/api/v3/lego/sets/${this.searchedSet.set_num}/parts`,{headers:{Authorization:"key 2d917e228bae2a71075a8de5361b4f49"},params:{page_size:5}});e.data.results.forEach((e=>{const t=((e,t)=>{var a;const s=N(e);return s?null==(a=s.parts)?void 0:a.find((e=>e.id===t.id)):void 0})(this.searchedSet.set_num,e);t?this.parts.push(t):this.parts.push(e)})),this.nextPage=e.data.next,this.prevPage=e.data.previous,H(this.searchedSet.set_num,this.parts)},async getPartsPage(e){const t=await this.$http.get(e,{headers:{Authorization:"key 2d917e228bae2a71075a8de5361b4f49"}});this.parts=t.data.results,this.nextPage=t.data.next,this.prevPage=t.data.previous,H(this.searchedSet.set_num,this.parts)}}};const Q={id:"root"},D=o("hr",{style:{margin:"0"}},null,-1),G={key:0},K={class:"parts-list"},T={class:"page-buttons"},X=d("prev"),Z=d("next");B.render=function(e,t,n,d,c,p){const m=a("Header"),v=a("SetCard"),_=a("PartCard"),g=a("ui-button");return s(),r(l,null,[o(m,{"content-selector":"#root",onSetSelected:p.onSelect},null,8,["onSetSelected"]),o("div",Q,[o(v,{"searched-set":c.searchedSet,onFetchParts:p.getParts},null,8,["searched-set","onFetchParts"]),D,c.parts?(s(),r("div",G,[o("div",K,[(s(!0),r(l,null,u(c.parts,(e=>(s(),r(_,{part:e},null,8,["part"])))),256))]),o("div",T,[c.prevPage?(s(),r(g,{key:0,raised:"",onClick:t[1]||(t[1]=e=>p.getPartsPage(c.prevPage))},{default:h((()=>[X])),_:1})):i("",!0),c.nextPage?(s(),r(g,{key:1,raised:"",onClick:t[2]||(t[2]=e=>p.getPartsPage(c.nextPage))},{default:h((()=>[Z])),_:1})):i("",!0)])])):i("",!0)])],64)};const W=p(B);W.use(m,v),W.use(_),W.use(g),W.mount("#app");
