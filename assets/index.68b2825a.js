import{p as e,a as t,r as a,o as s,c as r,b as n,w as o,d as c,t as d,e as l,F as i,f as u,g as h,h as p,v as m,i as v,K as _,X as S}from"./vendor.6ba19610.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(a){const s=new URL(e,location),r=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((a,n)=>{const o=new URL(e,s);if(self[t].moduleMap[o])return a(self[t].moduleMap[o]);const c=new Blob([`import * as m from '${o}';`,`${t}.moduleMap['${o}']=m;`],{type:"text/javascript"}),d=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(c),onerror(){n(new Error(`Failed to import: ${e}`)),r(d)},onload(){a(self[t].moduleMap[o]),r(d)}});document.head.appendChild(d)})),self[t].moduleMap={}}}("/lego-set-checker/assets/");var g={name:"Header",props:{contentSelector:String},data:()=>({searchedSet:"",sets:[]}),methods:{async onSearch(e){const t=await this.$http.get("https://rebrickable.com/api/v3/lego/sets",{params:{search:e},headers:{Authorization:"key 2d917e228bae2a71075a8de5361b4f49"}});this.sets=t.data.results.map((e=>({label:`${e.set_num} | ${e.name}`,key:e.set_num})))},onSelect(e){this.searchedSet=e.label,this.$emit("setSelected",e.key)}},emits:["setSelected"]};const f=o("data-v-5e280fa9");e("data-v-5e280fa9");const b={class:"searchbar__icon"},P=c("search");t();const y=f(((e,t,o,c,d,l)=>{const i=a("ui-icon"),u=a("ui-autocomplete"),h=a("ui-top-app-bar");return s(),r(h,{"content-selector":o.contentSelector,title:"Lego Set Checker"},{toolbar:f((()=>[n(u,{"model-value":d.searchedSet,source:d.sets,class:"autocomplete",delay:"500",placeholder:"Search set by ID",remote:"",onSearch:l.onSearch,onSelected:l.onSelect},{after:f((()=>[n("div",b,[n(i,{dark:"",outlined:""},{default:f((()=>[P])),_:1})])])),_:1},8,["model-value","source","onSearch","onSelected"])])),_:1},8,["content-selector"])}));g.render=y,g.__scopeId="data-v-5e280fa9";var w={name:"SetCard",props:{searchedSet:null},methods:{async fetchParts(){this.$emit("fetchParts",this.searchedSet.set_num)}},emits:["fetchParts"]};const k=o("data-v-176d4260");e("data-v-176d4260");const $={key:0,class:"set-card__container"},C={class:"set-card__info"},x={class:"set-card__info-text"},I=n("div",{class:"set-card__info-labels"},[n("div",null,"Name:"),n("div",null,"Set-Number:"),n("div",null,"Parts:")],-1),L={class:"set-card__info-values"},N=c("Get parts");t();const O=k(((e,t,o,c,i,u)=>{const h=a("ui-button");return o.searchedSet?(s(),r("div",$,[n("img",{src:o.searchedSet.set_img_url,alt:"",class:"set-card__image",width:"200"},null,8,["src"]),n("div",C,[n("div",x,[I,n("div",L,[n("div",null,d(o.searchedSet.name),1),n("div",null,d(o.searchedSet.set_num),1),n("div",null,d(o.searchedSet.num_parts),1)])]),n(h,{raised:"",onClick:u.fetchParts},{default:k((()=>[N])),_:1},8,["onClick"])])])):l("",!0)}));w.render=O,w.__scopeId="data-v-176d4260";const U=e=>{const t=localStorage.getItem(e);return t?JSON.parse(t):void 0};var E={name:"PartCard",props:{part:null},methods:{handlePersistPart(){((e,t)=>{var a;const s=U(e);if(!s)throw new Error(`set with id ${e} was not found in local storage`);s.parts=null==(a=s.parts)?void 0:a.map((e=>e.id===t.id?t:e)),localStorage.setItem(e,JSON.stringify(s))})(this.part.set_num,this.part)}}};const M=o("data-v-d940cbca");e("data-v-d940cbca");const R={key:0,class:"part-card__container"},j={class:"part-card__info"},z=n("div",{class:"part-card__info-labels"},[n("div",null,"Name:"),n("div",null,"Quantity:")],-1),F={class:"part-card__info-values"},A={class:"part-card__form"},J=n("hr",null,null,-1);t();const q=M(((e,t,o,c,u,h)=>{const p=a("ui-textfield");return s(),r(i,null,[o.part?(s(),r("div",R,[n("img",{src:o.part.part.part_img_url,alt:"",class:"part-card__image",width:"100"},null,8,["src"]),n("div",j,[z,n("div",F,[n("div",null,d(o.part.part.name),1),n("div",null,d(o.part.quantity),1)])]),n("div",A,[n(p,{modelValue:o.part.quantity_owned,"onUpdate:modelValue":t[1]||(t[1]=e=>o.part.quantity_owned=e),modelModifiers:{number:!0},"input-type":"number",placeholder:"Quantity owned",onChange:h.handlePersistPart},null,8,["modelValue","onChange"])])])):l("",!0),J],64)}));E.render=q,E.__scopeId="data-v-d940cbca";const H=(e,t)=>{const a=U(e);if(!a)throw new Error(`set with id ${e} was not found in local storage`);t.forEach((e=>{var t,s,r;a.parts||(a.parts=[]),(null==(s=null==(t=a.parts)?void 0:t.map((e=>e.id)))?void 0:s.includes(e.id))||null==(r=a.parts)||r.push(e)})),localStorage.setItem(e,JSON.stringify(a))};var V={name:"app",components:{PartCard:E,SetCard:w,Header:g},data:()=>({searchedSet:null,parts:[],nextPage:"",prevPage:""}),methods:{async onSelect(e){const t=U();if(t)this.searchedSet=t;else{const t=await this.$http.get(`https://rebrickable.com/api/v3/lego/sets/${e}`,{headers:{Authorization:"key 2d917e228bae2a71075a8de5361b4f49"}});this.searchedSet=t.data,localStorage.getItem(this.searchedSet.set_num)||localStorage.setItem(this.searchedSet.set_num,JSON.stringify(this.searchedSet))}},async getParts(){const e=await this.$http.get(`https://rebrickable.com/api/v3/lego/sets/${this.searchedSet.set_num}/parts`,{headers:{Authorization:"key 2d917e228bae2a71075a8de5361b4f49"},params:{page_size:5}});e.data.results.forEach((e=>{const t=((e,t)=>{var a;const s=U(e);return s?null==(a=s.parts)?void 0:a.find((e=>e.id===t.id)):void 0})(this.searchedSet.set_num,e);t?this.parts.push(t):this.parts.push(e)})),this.nextPage=e.data.next,this.prevPage=e.data.previous,H(this.searchedSet.set_num,this.parts)},async getPartsPage(e){const t=await this.$http.get(e,{headers:{Authorization:"key 2d917e228bae2a71075a8de5361b4f49"}});this.parts=t.data.results,this.nextPage=t.data.next,this.prevPage=t.data.previous,H(this.searchedSet.set_num,this.parts)}}};const Q={id:"root"},B=n("hr",{style:{margin:"0"}},null,-1),D={key:0},G={class:"parts-list"},K={class:"page-buttons"},X=c("prev"),T=c("next");V.render=function(e,t,o,c,d,p){const m=a("Header"),v=a("SetCard"),_=a("PartCard"),S=a("ui-button");return s(),r(i,null,[n(m,{"content-selector":"#root",onSetSelected:p.onSelect},null,8,["onSetSelected"]),n("div",Q,[n(v,{"searched-set":d.searchedSet,onFetchParts:p.getParts},null,8,["searched-set","onFetchParts"]),B,d.parts?(s(),r("div",D,[n("div",G,[(s(!0),r(i,null,u(d.parts,(e=>(s(),r(_,{part:e},null,8,["part"])))),256))]),n("div",K,[d.prevPage?(s(),r(S,{key:0,raised:"",onClick:t[1]||(t[1]=e=>p.getPartsPage(d.prevPage))},{default:h((()=>[X])),_:1})):l("",!0),d.nextPage?(s(),r(S,{key:1,raised:"",onClick:t[2]||(t[2]=e=>p.getPartsPage(d.nextPage))},{default:h((()=>[T])),_:1})):l("",!0)])])):l("",!0)])],64)};const W=p(V);W.use(m,v),W.use(_),W.use(S),W.mount("#app");
